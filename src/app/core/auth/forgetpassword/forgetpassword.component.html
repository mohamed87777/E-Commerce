<section
  class="py-14 bg-gradient-to-br from-[#e6f4ea] via-[#f0fdf4] to-[#d1fae5]"
>
  <div
    class="container max-w-xl mx-auto bg-white dark:bg-gray-900 p-8 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700"
  >
  
<ol class="flex items-center w-full p-3 py-8 my-5 space-x-2 text-sm font-medium text-center text-gray-500 bg-white border border-gray-200 rounded-lg shadow-xs dark:text-gray-400 sm:text-base dark:bg-gray-800 dark:border-gray-700 sm:p-4 sm:space-x-4 rtl:space-x-reverse">
    <li [ngClass]="step==1 ? ['bg-gradient-to-r','from-green-400','via-emerald-500','to-teal-600','bg-clip-text','text-teal-600'] : []"
  class="flex items-center">
        <span [ngClass]="step==1 ? ['dark:border-green-600',' border-green-400']:[]"
        class="flex items-center justify-center w-5 h-5 me-2 text-xs border  rounded-full shrink-0 ">
            1
        </span>
        Verify <span class="hidden sm:inline-flex sm:ms-2">Email</span>
        <svg class="w-3 h-3 ms-2 sm:ms-4 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 9 4-4-4-4M1 9l4-4-4-4"/>
        </svg>
    </li>
    <li [ngClass]="step==2 ? ['bg-gradient-to-r','from-green-400','via-emerald-500','to-teal-600','bg-clip-text','text-teal-600'] : []"
    class="flex items-center">
        <span  [ngClass]="step==2 ? ['dark:border-green-600',' border-green-400']:[]"
        class="flex items-center justify-center w-5 h-5 me-2 text-xs border border-gray-500 rounded-full shrink-0 dark:border-gray-400">
            2
        </span>
        Verify<span class="hidden sm:inline-flex sm:ms-2">Code</span>
        <svg class="w-3 h-3 ms-2 sm:ms-4 rtl:rotate-180" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 10">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m7 9 4-4-4-4M1 9l4-4-4-4"/>
        </svg>
    </li>
    <li 
    [ngClass]="step==3 ? ['bg-gradient-to-r','from-green-400','via-emerald-500','to-teal-600','bg-clip-text','text-teal-600'] : []"
    class="flex items-center">
        <span  [ngClass]="step==3 ? ['dark:border-green-600',' border-green-400']:[]" 
        class="flex items-center justify-center w-5 h-5 me-2 text-xs border border-gray-500 rounded-full shrink-0 dark:border-gray-400">
            3
        </span>
        Reset Password
    </li>
</ol>


    @if(step==1){
        <form [formGroup]="verifyEmail" (ngSubmit)="formStep1()">
      <div class="relative z-0 w-full group">
        <input
          type="email"
          formControlName="email"
          id="email"
          placeholder=" "
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none peer focus:outline-none focus:ring-0 focus:border-green-600 dark:text-white dark:focus:border-green-500"
          [ngClass]="{
            'border-gray-300 dark:border-gray-600': !emailcontroller?.touched,
            'border-green-500 dark:border-green-400':
              emailcontroller?.valid && emailcontroller?.touched,
            'border-red-500 dark:border-red-400':
              emailcontroller?.invalid && emailcontroller?.touched
          }"
        />
        <label
          for="email"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 peer-focus:text-green-600 peer-focus:dark:text-green-500"
        >
          Email
        </label>
        @if (emailcontroller?.touched && emailcontroller?.errors) { @if
        (emailcontroller?.getError('required')) {
        <div
          class="flex items-start gap-2 mt-2 rounded-md border border-red-300 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-600 dark:bg-red-900/40 dark:text-red-300"
        >
          <svg
            class="h-5 w-5 mt-0.5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v2m0 4h.01M12 5.5a6.5 6.5 0 106.5 6.5 6.5 6.5 0 00-6.5-6.5z"
            />
          </svg>
          <span>Email is required.</span>
        </div>
        } @if (emailcontroller?.getError('email')) {
        <div
          class="flex items-start gap-2 mt-2 rounded-md border border-red-300 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-600 dark:bg-red-900/40 dark:text-red-300"
        >
          <svg
            class="h-5 w-5 mt-0.5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v2m0 4h.01M12 5.5a6.5 6.5 0 106.5 6.5 6.5 6.5 0 00-6.5-6.5z"
            />
          </svg>
          <span>Enter a valid email format.</span>
        </div>
        } }

        <button
          type="submit"
          class="w-full py-3 my-6 text-white font-bold rounded-xl shadow-lg bg-gradient-to-r from-green-400 via-emerald-500 to-teal-600 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out"
        >
          Verify Email @if (isLoading) {
          <span><i class="fas fa-spinner animate-spin"></i></span>

          }
        </button>
        @if (msgError) {
        <p class="text-center text-red-800 mt-4 p-4 rounded-2xl bg-red-200">
          {{ msgError }}
        </p>

        } @else if (msgsucc) {
        <p class="text-center text-green-800 mt-4 p-4 rounded-2xl bg-green-200">
          {{ msgsucc }}
        </p>

        }
      </div>
    </form>
    }
   @else if (step==2) {
     <form [formGroup]="verifyCode" (ngSubmit)="formStep2()">
      <div class="relative z-0 w-full group">
        <input
          type="tel"
          formControlName="resetCode"
          id="resetCode"
          placeholder=" "
          class="block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none peer focus:outline-none focus:ring-0 focus:border-green-600 dark:text-white dark:focus:border-green-500"
          [ngClass]="{
            'border-gray-300 dark:border-gray-600': !codecontroller?.touched,
            'border-green-500 dark:border-green-400':
              codecontroller?.valid && codecontroller?.touched,
            'border-red-500 dark:border-red-400':
              codecontroller?.invalid && codecontroller?.touched
          }"
        />
        <label
          for="resetCode"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 peer-focus:text-green-600 peer-focus:dark:text-green-500"
        >
          Code
        </label>
        @if (codecontroller?.touched && codecontroller?.errors) { @if
        (codecontroller?.getError('required')) {
        <div
          class="flex items-start gap-2 mt-2 rounded-md border border-red-300 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-600 dark:bg-red-900/40 dark:text-red-300"
        >
          <svg
            class="h-5 w-5 mt-0.5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v2m0 4h.01M12 5.5a6.5 6.5 0 106.5 6.5 6.5 6.5 0 00-6.5-6.5z"
            />
          </svg>
          <span>Code is required.</span>
        </div>
        } @if (codecontroller?.getError('resetCode')) {
        <div
          class="flex items-start gap-2 mt-2 rounded-md border border-red-300 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-600 dark:bg-red-900/40 dark:text-red-300"
        >
          <svg
            class="h-5 w-5 mt-0.5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v2m0 4h.01M12 5.5a6.5 6.5 0 106.5 6.5 6.5 6.5 0 00-6.5-6.5z"
            />
          </svg>
          <span>Enter a valid Code format.</span>
        </div>
        } }

        <button
          type="submit"
          class="w-full py-3 my-6 text-white font-bold rounded-xl shadow-lg bg-gradient-to-r from-green-400 via-emerald-500 to-teal-600 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out"
        >
          Verify Code @if (isLoading) {
          <span><i class="fas fa-spinner animate-spin"></i></span>

          }
        </button>
        @if (msgError) {
        <p class="text-center text-red-800 mt-4 p-4 rounded-2xl bg-red-200">
          {{ msgError }}
        </p>

        } @else if (msgsucc) {
        <p class="text-center text-green-800 mt-4 p-4 rounded-2xl bg-green-200">
          {{ msgsucc }}
        </p>

        }
      </div>
    </form>
   }
    @else if (step==3) {
        <form [formGroup]="verifyPassword" (ngSubmit)="formStep3()">
      <div class="relative z-0 w-full group">
        <input
          type="email"
          formControlName="email"
          id="email"
          placeholder=" "
          class="block py-2.5 px-0 my-3 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none peer focus:outline-none focus:ring-0 focus:border-green-600 dark:text-white dark:focus:border-green-500"
          [ngClass]="{
            'border-gray-300 dark:border-gray-600': !emailcontroller?.touched,
            'border-green-500 dark:border-green-400':
              emailcontroller?.valid && emailcontroller?.touched,
            'border-red-500 dark:border-red-400':
              emailcontroller?.invalid && emailcontroller?.touched
          }"
        />
        <label
          for="email"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 peer-focus:text-green-600 peer-focus:dark:text-green-500"
        >
          Email
        </label>
        @if (emailcontroller?.touched && emailcontroller?.errors) { @if
        (emailcontroller?.getError('required')) {
        <div
          class="flex items-start gap-2 mt-2 rounded-md border border-red-300 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-600 dark:bg-red-900/40 dark:text-red-300"
        >
          <svg
            class="h-5 w-5 mt-0.5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v2m0 4h.01M12 5.5a6.5 6.5 0 106.5 6.5 6.5 6.5 0 00-6.5-6.5z"
            />
          </svg>
          <span>Email is required.</span>
        </div>
        } @if (emailcontroller?.getError('email')) {
        <div
          class="flex items-start gap-2 mt-2 rounded-md border border-red-300 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-600 dark:bg-red-900/40 dark:text-red-300"
        >
          <svg
            class="h-5 w-5 mt-0.5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v2m0 4h.01M12 5.5a6.5 6.5 0 106.5 6.5 6.5 6.5 0 00-6.5-6.5z"
            />
          </svg>
          <span>Enter a valid email format.</span>
        </div>
        } }

       
      </div>
      <div class="relative z-0 w-full group">
        <input
          type="password"
          formControlName="newPassword"
          id="newPassword"
          placeholder=" "
          class="block py-2.5 my-3 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 appearance-none peer focus:outline-none focus:ring-0 focus:border-green-600 dark:text-white dark:focus:border-green-500"
          [ngClass]="{
            'border-gray-300 dark:border-gray-600':
              !passwordcontroller?.touched,
            'border-green-500 dark:border-green-400':
              passwordcontroller?.valid && passwordcontroller?.touched,
            'border-red-500 dark:border-red-400':
              passwordcontroller?.invalid && passwordcontroller?.touched
          }"
        />
        <label
          for="newPassword"
          class="peer-focus:font-medium absolute text-sm text-gray-500 dark:text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 peer-focus:text-green-600 peer-focus:dark:text-green-500"
        >
          Password
        </label>
        @if (passwordcontroller?.touched && passwordcontroller?.errors) { @if
        (passwordcontroller?.getError('required')) {
        <div
          class="flex items-start gap-2 mt-2 rounded-md border border-red-300 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-600 dark:bg-red-900/40 dark:text-red-300"
        >
          <svg
            class="h-5 w-5 mt-0.5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v2m0 4h.01M12 5.5a6.5 6.5 0 106.5 6.5 6.5 6.5 0 00-6.5-6.5z"
            />
          </svg>
          <span>Password is required.</span>
        </div>
        } @if (passwordcontroller?.getError('pattern')) {
        <div
          class="flex items-start gap-2 mt-2 rounded-md border border-red-300 bg-red-50 px-3 py-2 text-sm text-red-700 dark:border-red-600 dark:bg-red-900/40 dark:text-red-300"
        >
          <svg
            class="h-5 w-5 mt-0.5 flex-shrink-0"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 9v2m0 4h.01M12 5.5a6.5 6.5 0 106.5 6.5 6.5 6.5 0 00-6.5-6.5z"
            />
          </svg>
          <span>at least 6 characters required. </span>
        </div>
        } }
      </div>
       <button
          type="submit"
          class="w-full py-3 my-6 text-white font-bold rounded-xl shadow-lg bg-gradient-to-r from-green-400 via-emerald-500 to-teal-600 hover:scale-105 hover:shadow-xl transition-all duration-300 ease-in-out"
        >
          Reset Password @if (isLoading) {
          <span><i class="fas fa-spinner animate-spin"></i></span>

          }
        </button>
        @if (msgError) {
        <p class="text-center text-red-800 mt-4 p-4 rounded-2xl bg-red-200">
          {{ msgError }}
        </p>

        } @else if (msgsucc) {
        <p class="text-center text-green-800 mt-4 p-4 rounded-2xl bg-green-200">
          {{ msgsucc }}
        </p>

        }
    </form>
    }
  </div>
</section>
