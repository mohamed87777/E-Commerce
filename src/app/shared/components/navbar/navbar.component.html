<nav
  class="bg-gradient-to-r from-[#D4FAE6] via-white to-[#E6FCEF] shadow-md sticky top-0 z-50"
>
  <div
    class="max-w-screen-2xl mx-auto px-4 py-4 flex items-center justify-between"
  >
    <div class="flex items-center gap-6">
      <a routerLink="/" class="flex items-center gap-2">
        <img
          src="/images/freshcart-logo.svg"
          class="h-8"
          alt="FreshCart Logo"
        />
      </a>

      @if (isLogin) {
      <div class="hidden md:flex md:items-center md:space-x-4">
        <a routerLink="/home" routerLinkActive="active-link" class="nav-link"
          >Home</a
        >
        <a routerLink="/product" routerLinkActive="active-link" class="nav-link"
          >Products</a
        >
        <a
          routerLink="/wishlist"
          routerLinkActive="active-link"
          class="nav-link"
          >Wish List</a
        >
        <a
          routerLink="/categories"
          routerLinkActive="active-link"
          class="nav-link"
          >Categories</a
        >
        <a routerLink="/brands" routerLinkActive="active-link" class="nav-link"
          >Brands</a
        >
      </div>
      }
    </div>

    <div class="hidden md:flex items-center gap-4">
      <div class="flex gap-3 text-[#0aad0a]">
        <a href="#"
          ><i class="fab fa-facebook-f hover:text-[#11bd11] transition"></i
        ></a>
        <a href="#"
          ><i class="fab fa-instagram hover:text-[#11bd11] transition"></i
        ></a>
        <a href="#"
          ><i class="fab fa-twitter hover:text-[#11bd11] transition"></i
        ></a>
        <a href="#"
          ><i class="fab fa-tiktok hover:text-[#11bd11] transition"></i
        ></a>
        <a href="#"
          ><i class="fab fa-youtube hover:text-[#11bd11] transition"></i
        ></a>
        <a href="#"
          ><i class="fab fa-linkedin-in hover:text-[#11bd11] transition"></i
        ></a>

        <a routerLink="/cart" class="relative hover:text-[#11bd11] transition">
          <i class="fas fa-cart-shopping text-xl"></i>
          @if (count > 0) {
          <span
            class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-md animate-pulse"
          >
            {{ count }}
          </span>
          }
        </a>
      </div>

      <!-- Auth -->
      <div class="flex gap-3">
        @if (!isLogin) {
        <a routerLink="/login" class="auth-link">Login</a>
        <a routerLink="/register" class="auth-link">Register</a>
        } @else {
        <button
          (click)="confirmLogout()"
          class="text-[#ff4d4d] hover:text-[#ff1a1a] text-sm font-semibold transition cursor-pointer"
        >
          Log Out
        </button>
        }
      </div>
    </div>

    <button
      type="button"
      (click)="toggleMobileMenu()"
      class="md:hidden w-12 h-12 flex items-center justify-center text-white bg-gradient-to-r from-[#0aad0a] to-[#11bd11] rounded-full shadow-lg transition-all duration-300 ease-in-out hover:scale-110 hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-[#0aad0a]/40"
    >
      <span class="sr-only">Toggle menu</span>
      <svg
        [ngClass]="{ 'rotate-90': isMobileMenuOpen }"
        class="w-7 h-7 transition-transform duration-300"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"
        />
      </svg>
    </button>
  </div>

  @if (isMobileMenuOpen) {
  <div
    class="md:hidden mt-3 mx-2 bg-white dark:bg-gray-900 rounded-2xl shadow-2xl p-5 space-y-4 animate-[slideDown_0.4s_ease-out]"
  >
    <a
      routerLink="/cart"
      class="flex items-center justify-between px-3 py-2 rounded-lg bg-green-50 hover:bg-green-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition-all duration-300"
    >
      <div class="flex items-center gap-2">
        <i
          class="fas fa-cart-shopping text-green-600 dark:text-green-400 text-xl"
        ></i>
        <span class="text-lg font-semibold text-gray-700 dark:text-gray-200"
          >Cart</span
        >
      </div>
      @if (count > 0) {
      <span
        class="bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full shadow-md animate-pulse"
      >
        {{ count }}
      </span>
      }
    </a>

    <a routerLink="/home" class="block ... hover:text-[#11bd11] transition text-green-600">Home</a>
    <a routerLink="/product" class="block ... hover:text-[#11bd11] transition text-green-600">Products</a>
    <a routerLink="/wishlist" class="block ... hover:text-[#11bd11] transition text-green-600">Wish List</a>
    <a routerLink="/categories" class="block ... hover:text-[#11bd11] transition text-green-600">Categories</a>
    <a routerLink="/brands" class="block ... hover:text-[#11bd11] transition text-green-600">Brands</a>

    @if (!isLogin) {
    <a routerLink="/login" class="block ... hover:text-[#11bd11] transition text-green-600">Login</a>
    <a routerLink="/register" class="block ... hover:text-[#11bd11] transition text-green-600">Register</a>
    } @else {
    <button (click)="signOutConfirmed()" class="text-[#ff4d4d] hover:text-[#ff1a1a] text-sm font-semibold transition cursor-pointer">Log Out</button>
    }
  </div>
  }


  @if (showLogoutModal) {
  <div
    class="fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50"
  >
    <div
      class="bg-white dark:bg-gray-900 rounded-xl p-6 w-[90%] max-w-md shadow-2xl border-t-4 border-red-500 dark:border-rose-500 animate-fade-in relative"
    >
      <h3 class="text-2xl font-bold text-red-600 dark:text-red-400 mb-4">
        Are you sure you want to log out?
      </h3>

      <div class="flex flex-col gap-3">
        <button
          (click)="signOutConfirmed()"
          class="w-full py-2.5 text-white font-semibold rounded-lg bg-gradient-to-r from-red-500 via-pink-500 to-rose-600 hover:bg-rose-700 hover:scale-105 hover:shadow-md transition-all duration-300 ease-in-out"
        >
          Yes, Log Out
        </button>

        <button
          (click)="cancelLogout()"
          class="w-full py-2.5 font-semibold rounded-lg bg-gradient-to-r from-gray-400 via-gray-500 to-gray-600 text-gray-100 hover:bg-gray-700 hover:scale-105 hover:shadow-md transition-all duration-300 ease-in-out"
        >
          Cancel
        </button>
      </div>
    </div>
  </div>
  }
</nav>
